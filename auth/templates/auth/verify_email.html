{% import "macros/buttons.html" as buttons %}
{% import 'macros/forms.html' as forms %}
{% import "macros/verify_email.html" as verify_email %}

{% extends "auth/layout.html" %}

{% block head_title_content %}{{ _('Verify your email') }}{% endblock %}


{% block auth_form %}
<div style="padding: 2rem; background: linear-gradient(to right, #1C1C4B, #544485); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); backdrop-filter: blur(4px); border-radius: 0.75rem; transition: border-color 0.3s, box-shadow 0.3s;">
  <div style="display: flex; gap: 1rem; flex-direction: column; justify-content: center; align-items: center; margin-bottom: 1rem;">
    <img style="width: 130px;" src="{{ url_for('dashboard:static', path='/logo.png') }}" />
    <h1 class="text-3xl text-white font-bold ">{{ _('Verify your email') }}</h1>
  
  </div>
<script type="text/hyperscript">
  on load
    set $submitPending to false
  end

  def submitForm()
    if $submitPending is false
      set form to #{{ form.meta.id }}
      for submitButton in <button[type='submit'] /> in form
        toggle @disabled on submitButton
      end
      set $submitPending to true
      submit() the form
    end
  end
</script>
<form
  id="{{ form.meta.id }}"
  method="POST"
  action="{{ tenant.url_path_for(request, 'auth:verify_email') }}"
  _="
    on submit
      halt the event
      updateCodeValue()
      submitForm()
    end
  "
>
  <div class="space-y-4 text-white">
    <p class="text-justify text-sm">{{ _("To complete the email verification process, please check your email for the verification code. Enter the code below to verify your email address.") }}</p>
    {{ verify_email.form(form, code_length) }}
  </div>
  <div class="flex items-center justify-between mt-6">
    <a href="{{ tenant.url_path_for(request, 'auth:verify_email_request') }}" class="btn border-slate-200 hover:border-slate-300 text-primary">{{ _('Resend the code') }}</a>
    {% call buttons.submit('btn') %}
      {{ _("Verify my email") }}
    {% endcall %}
  </div>

</form>
{% if show_branding %}
<div class="pt-5 mt-6 text-white border-t border-light">
  {{ branding.branding() }}
</div>
{% endif %}
</div>
{% endblock %}
